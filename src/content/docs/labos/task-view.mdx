---
title: Odoo - Vue
description: Docs intro
---
import { Aside, FileTree, Tabs, TabItem, } from '@astrojs/starlight/components';

Vous allez adapter et enrichir les vues du module existant
en personnalisant l’interface via des extensions des menus et des vues.

## Les menus

Ajoutez un nouveau sous-menu au menu créé dans le module parent.

<Aside icon="pencil" title="Exercice">

**Créez** le fichier `todo_stage/views/todo_menu.xml`.
N’oubliez pas de l’ajouter dans le manifest (`data`) pour qu’Odoo charge le fichier XML.

Ajoutez une action (`ir.actions.act_window`) permettant d'afficher la vue liste et formulaire du modèle
tag. Inspirez-vous des actions déjà définies dans le module parent.

Ajoutez une nouvelle entrée sous le menu **Configuration** utilisant l’action que vous venez de créer.
Cliquer sur ce menu doit permettre d’afficher la liste des tags

Les menus existants du module principal doivent rester visibles.

</Aside>

## La liste des tâches

Pour personnaliser la liste des tâches, commencez par créer le fichier `todo_stage/views/todo_view.xml`.
Dans le module parent la vue liste des tâches est implémentée comme suit :

```xml
<record id="view_tree_todo_task" model="ir.ui.view">
    <field name="name">To-do Task List</field>
    <field name="model">todo.task</field>
    <field name="arch" type="xml">
        <list decoration-muted="is_done==True">
            <field name="name"/>
            <field name="date_deadline"/>
            <field name="is_done"/>
        </list>
    </field>
</record>
```

Dans Odoo, les vues peuvent soit être **héritées**, soit être **complètement réécrites**.

- La réécriture complète est particulièrement utile lorsque la vue d'origine est **simple**.
- Le champ qui permet de contrôler la réécriture d'une vue est : `<field name="priority">`.

Par défaut, chaque vue possède une priorité de 16.
Si vous créez une nouvelle vue avec ce champ et que vous lui attribuez une valeur inférieure à 16, 
votre vue prendra la place de la vue initiale et sera affichée à la place de celle d'origine.

Ajoutez le champ priorité avec la valeur 15 et supprimez le champs `date_deadline` :

```xml title="todo_stage/views/todo_view.xml" ins={4} del={8}
<record id="view_tree_todo_task" model="ir.ui.view">
    <field name="name">To-do Task List</field>
    <field name="model">todo.task</field>
    <field name="priority">15</field>
    <field name="arch" type="xml">
        <list decoration-muted="is_done==True">
            <field name="name"/>
            <field name="date_deadline"/>
            <field name="is_done"/>
        </list>
    </field>
</record>
```

Mettez à jour votre module et vérifiez que la vue liste n'affiche plus la date de fin.

<Aside icon="pencil" title="Exercice - Une vue complexe">

En étudiant la vue formulaire d'une tâche proposée ci-dessous :

- Expliquez l'utilité des éléments `<group>` et `<notebook>` et comment ils structurent l'affichage des champs.
- Identifiez les widgets utilisés dans cette vue (`many2many_tags`, `html`, `image`) et expliquez comment chacun influence l'affichage des champs dans le formulaire.
- Précisez dans quelles conditions le **Bouton “Set to open”** sera visible pour l'utilisateur.  

```xml title="todo_stage/views/todo_view.xml"
<record id="view_form_todo_task_ui" model="ir.ui.view">
    <field name="priority">15</field>
    <field name="model">todo.task</field>
    <field name="arch" type="xml">
        <form>
            <header>
                <!-- Boutons d'action -->
                <button name="do_clear_done" type="object"
                        string="Clear Done" class="oe_highlight"
                        invisible="[(state,'in',['draft'])]"/>
                <button string="Set to open" type="object" name="set_to_open"
                        invisible="[(state,'!=','draft')]" class="oe_edit_only"/>
                <button string="Set to closed" type="object" name="set_to_closed"
                        invisible="[(state,'!=','open')]" class="oe_edit_only"/>
                <button string="Reset" type="object" name="set_to_draft"
                        invisible="[(state,'=','draft')]" class="oe_edit_only"/>
                <field name="state" widget="statusbar"/>
            </header>

            <sheet>
                <!-- Titre et informations principales -->
                <div class="oe_title">
                    <h1><field name="name"/></h1>
                    <span class="oe_read_only">By </span>
                    <field name="user_id" class="oe_inline" readonly="1"/>
                    <span> created on </span>
                    <field name="date_created" widget="date" readonly="1" class="oe_inline"/>
                </div>

                <!-- Groupes principaux -->
                <group name="group_top">
                    <group name="group_left">
                        <field name="date_deadline"/>
                        <field name="effort_estimate"/>
                        <field name="tag_ids" widget="many2many_tags"/>
                    </group>
                    <group name="group_right">
                        <field name="desc"/>
                        <field name="image" widget="image" class="oe_avatar"/>
                    </group>
                </group>

                <!-- Onglets -->
                <notebook>
                    <page string="Team" name="team_page">
                        <field name="team_ids"/>
                    </page>
                    <page string="Documentation" name="doc_page">
                        <field name="docs" widget="html"/>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
</record>
```

Finalement, insérez cette vue dans votre sous-module et mettez à jour 
celui-ci afin qu’elle soit active dans Odoo.

</Aside>